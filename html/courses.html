<!-- Courses Hero Section -->
<section class="hero d-flex align-items-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6 text-white hero-content text-md-start text-center">
        <h1 class="display-4 fw-bold mb-4">Our Courses</h1>
        <p class="lead mb-4">Discover our comprehensive range of healthcare and social care training programs.</p>
        <p class="h4 mb-4">Transform your career with accredited online courses.</p>
      </div>
      <div class="col-lg-6 text-center">
        <img src="https://placehold.co/600x400?text=Healthcare+Courses" alt="Healthcare Courses" class="img-fluid rounded">
      </div>
    </div>
  </div>
</section>

<!-- Course Search and Filter Section -->
<section class="py-5 bg-light">
  <div class="container">
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="input-group">
          <input type="text" class="form-control" id="courseSearch" placeholder="Search courses...">
          <button class="btn btn-primary" type="button">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
      <div class="col-md-6">
        <div class="d-flex justify-content-md-end mt-3 mt-md-0">
          <select class="form-select" id="categoryFilter" style="max-width: 200px;">
            <option value="">All Categories</option>
            <option value="Healthcare">Healthcare</option>
            <option value="Social Care">Social Care</option>
            <option value="Mental Health">Mental Health</option>
          </select>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Courses Section -->
<section class="featured-courses py-5">
  <div class="container">
    <div class="row text-center mb-5">
      <div class="col-12">
        <h2 class="display-6 fw-bold">Featured Courses</h2>
        <p class="lead text-muted">Explore our most popular training programs</p>
      </div>
    </div>
    <div class="row g-4" id="coursesContainer">
      <!-- Course cards will be dynamically inserted here -->
    </div>
  </div>
</section>

<!-- Course Features Section -->
<section class="features py-5 bg-light">
  <div class="container">
    <div class="row text-center mb-5">
      <div class="col-12">
        <h2 class="display-6 fw-bold">Why Choose Our Courses?</h2>
        <p class="lead text-muted">Benefits of learning with LearnPac</p>
      </div>
    </div>
    <div class="row g-4" id="featuresContainer">
      <!-- Features will be dynamically inserted here -->
    </div>
  </div>
</section>

<!-- Course Categories Section -->
<section class="testimonials py-5">
  <div class="container">
    <div class="row text-center mb-5">
      <div class="col-12">
        <h2 class="display-6 fw-bold">Course Categories</h2>
        <p class="lead text-muted">Browse courses by category</p>
      </div>
    </div>
    <div class="row g-4" id="categoriesContainer">
      <!-- Categories will be dynamically inserted here -->
    </div>
  </div>
</section>

<!-- Call to Action Section -->
<section class="cta py-5 bg-primary text-white">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8 text-center text-lg-start">
        <h2 class="display-6 fw-bold mb-3">Ready to Start Your Learning Journey?</h2>
        <p class="lead mb-0">Join thousands of healthcare professionals who have transformed their careers with LearnPac.</p>
      </div>
      <div class="col-lg-4 text-center text-lg-end mt-4 mt-lg-0">
        <a href="#" class="btn btn-light btn-lg">Browse All Courses</a>
      </div>
    </div>
  </div>
</section>

<!-- Course Modal -->
<div class="modal fade" id="courseModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="courseModalTitle"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6">
            <img src="" alt="" class="img-fluid rounded mb-3" id="courseModalImage">
          </div>
          <div class="col-md-6">
            <p class="lead" id="courseModalDescription"></p>
            <div class="mb-3">
              <h6>Course Modules:</h6>
              <ul id="courseModalModules"></ul>
            </div>
            <div class="mb-3">
              <h6>Course Features:</h6>
              <ul id="courseModalFeatures"></ul>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <a href="#" class="btn btn-primary" id="courseModalEnroll">Enroll Now</a>
      </div>
    </div>
  </div>
</div>

<script>
// Load and display courses
async function loadCourses() {
  try {
    const response = await fetch('./data/courses.json');
    const data = await response.json();
    
    // Display courses
    const coursesContainer = document.getElementById('coursesContainer');
    coursesContainer.innerHTML = data.courses.map(course => `
      <div class="col-lg-4 col-md-6">
        <div class="card h-100 course-card">
          <img src="${course.image}" class="card-img-top" alt="${course.title}">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span class="badge bg-${course.badge}">${course.category}</span>
              <span class="text-muted"><i class="fas fa-clock"></i> ${course.duration}</span>
            </div>
            <h5 class="card-title">${course.title}</h5>
            <p class="card-text">${course.description}</p>
            <div class="d-flex justify-content-between align-items-center">
              <span class="h5 mb-0">Â£${course.price}</span>
              <button class="btn btn-outline-primary" onclick="showCourseDetails('${course.id}')">Learn More</button>
            </div>
          </div>
        </div>
      </div>
    `).join('');

    // Display features
    const featuresContainer = document.getElementById('featuresContainer');
    featuresContainer.innerHTML = data.features.map(feature => `
      <div class="col-md-3">
        <div class="feature-card text-center p-4">
          <div class="feature-icon mb-3">
            <i class="fas fa-${feature.icon} fa-3x text-primary"></i>
          </div>
          <h4>${feature.name}</h4>
          <p class="text-muted">${feature.description}</p>
        </div>
      </div>
    `).join('');

    // Display categories
    const categoriesContainer = document.getElementById('categoriesContainer');
    categoriesContainer.innerHTML = data.categories.map(category => `
      <div class="col-md-4">
        <div class="testimonial-card p-4 bg-white rounded shadow-sm">
          <div class="feature-icon mb-3">
            <i class="fas fa-graduation-cap fa-3x text-${category.badge}"></i>
          </div>
          <h4>${category.name}</h4>
          <p class="text-muted">${category.description}</p>
          <a href="#" class="btn btn-outline-${category.badge} mt-3" onclick="filterByCategory('${category.name}')">View Courses</a>
        </div>
      </div>
    `).join('');

  } catch (error) {
    console.error('Error loading courses:', error);
    // Display error message to user
    document.getElementById('coursesContainer').innerHTML = `
      <div class="col-12 text-center">
        <div class="alert alert-danger" role="alert">
          Error loading courses. Please try again later.
        </div>
      </div>
    `;
  }
}

// Show course details in modal
function showCourseDetails(courseId) {
  fetch('./data/courses.json')
    .then(response => response.json())
    .then(data => {
      const course = data.courses.find(c => c.id === courseId);
      if (course) {
        document.getElementById('courseModalTitle').textContent = course.title;
        document.getElementById('courseModalImage').src = course.image;
        document.getElementById('courseModalDescription').textContent = course.description;
        
        document.getElementById('courseModalModules').innerHTML = course.modules
          .map(module => `<li>${module}</li>`).join('');
        
        document.getElementById('courseModalFeatures').innerHTML = course.features
          .map(feature => `<li>${feature}</li>`).join('');
        
        document.getElementById('courseModalEnroll').href = `#enroll-${course.id}`;
        
        new bootstrap.Modal(document.getElementById('courseModal')).show();
      }
    })
    .catch(error => {
      console.error('Error loading course details:', error);
      alert('Error loading course details. Please try again.');
    });
}

// Filter courses by category
function filterByCategory(category) {
  const cards = document.querySelectorAll('.course-card');
  cards.forEach(card => {
    const cardCategory = card.querySelector('.badge').textContent;
    card.closest('.col-lg-4').style.display = 
      category === 'All Categories' || cardCategory === category ? 'block' : 'none';
  });
}

// Search courses
document.getElementById('courseSearch').addEventListener('input', function(e) {
  const searchTerm = e.target.value.toLowerCase();
  const cards = document.querySelectorAll('.course-card');
  
  cards.forEach(card => {
    const title = card.querySelector('.card-title').textContent.toLowerCase();
    const description = card.querySelector('.card-text').textContent.toLowerCase();
    const category = card.querySelector('.badge').textContent.toLowerCase();
    
    const isVisible = title.includes(searchTerm) || 
                     description.includes(searchTerm) || 
                     category.includes(searchTerm);
    
    card.closest('.col-lg-4').style.display = isVisible ? 'block' : 'none';
  });
});

// Initialize category filter
document.getElementById('categoryFilter').addEventListener('change', function(e) {
  filterByCategory(e.target.value);
});

// Load courses when page loads
document.addEventListener('DOMContentLoaded', loadCourses);
</script> 